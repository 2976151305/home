<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="../layui/css/layui.css">
  <link rel="stylesheet" href="../css/style.css">
  <link rel="stylesheet" href="../layui/css/layui.mobile.css">
  <script src="../js/jquery-1.11.3.min.js"></script>
  <script src="../dist/js/mian.js"></script>
  <!--[if lt IE 9]>
    <script src="https://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
    <script src="https://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>
  <![endif]-->
  <title>商务合作</title>
</head>

<body>
  <header id="header"></header>
  <main class="layui-container">
    <div class="condition">
      <h1>整装之家供应商原则</h1>
      <ul>
        <li></li>
      </ul>
      <div class="textC">
        <button class="layui-inline layui-btn layui-btn-primary apply-btn">申请成为合作伙伴</button>
      </div>
    </div>
  </main>
  <footer id="footer"></footer>

  <script src="../layui/layui.js"></script>
  <script>
    layui.use(['element', 'layer', 'form'], function () {
      var element = layui.element
      var layer = layui.layer
      var form = layui.form
      var content = `
          <div class="layui-form">
            <div class="layui-form-item">
              <label class="layui-form-label">经营模式</label>
              <input type="radio" value="品牌方" title="品牌方" name="m" checked>
              <div class="layui-unselect layui-form-radio">
                <i class="layui-anim layui-icon"></i>
                <div>品牌方</div>
              </div>
              <input type="radio" value="经销商" title="经销商" name="m">
              <div class="layui-unselect layui-form-radio">
                <i class="layui-anim layui-icon"></i>
                <div>经销商</div>
              </div>
            </div>
            <div class="layui-form-item">
              <label class="layui-form-label">品牌名称</label>
              <div class="layui-input-block">
                <input type="text" id="bname" autocomplete="off" class="layui-input">
              </div>
            </div>
            <div class="layui-form-item">
              <label class="layui-form-label">公司名称</label>
              <div class="layui-input-block">
                <input type="text" id="cname" autocomplete="off" class="layui-input">
              </div>
            </div>
            <div class="layui-form-item">
              <label class="layui-form-label">联系人</label>
              <div class="layui-input-block">
                <input type="text" id="name" autocomplete="off" class="layui-input">
              </div>
            </div>
            <div class="layui-form-item">
              <label class="layui-form-label">手机号码</label>
              <div class="layui-input-block">
                <input type="tel" maxlength="11" id="phone" autocomplete="off" class="layui-input">
              </div>
            </div>
            <div class="layui-form-item">
              <label class="layui-form-label">上传图片</label>
              <div class="layui-input-block">
                <input type="file" id="file" class="layui-input">
              </div>
            </div>
          </div>
          `.trim()
      $('.apply-btn').on('click', function () {
        layer.open({
          title: '请告诉我们以下信息方便我们联系到您',
          content,
          btn: '提交',
          btnAlign: 'c',
          shade: .5,
          closeBtn: false,
          shadeClose: true,
          success: function () {
            form.render()
          },
          yes: function (index, layero) {
            var formData = new FormData()
            var management_model = $('input[name=m]:checked').val()
            var brand_category = '家电 冰箱'
            var brand_name = $('#bname').val()
            var company = $('#cname').val()
            var phone = $('#phone').val()
            var name = $('#name').val()
            var image = $('#file')[0].files[0]
            formData.append('management_model', management_model)
            formData.append('brand_category', brand_category)
            formData.append('brand_name', brand_name)
            formData.append('company', company)
            formData.append('phone', phone)
            formData.append('name', name)
            formData.append('image', image)
            $.ajax({
              url: BASEURL + '/decorate/users/api/apply/cooperation/',
              processData: false,
              method: 'POST',
              data: formData,
              contentType: false,
              dataType: 'json',
              success: function (res) {
                if (res.code === 'success') {
                  layer.open({
                    title: '提交成功',
                    icon: 1,
                    content: '稍后我们的负责人员会主动与你沟通',
                    btn: '知道了',
                    btnAlign: 'c'
                  })
                  layer.close(index)
                } else {
                  layer.msg(res.msg)
                }
              }
            })
          }
        })
      })
    })
  </script>
</body>

</html>